{"id":"MaT4","dependencies":[{"name":"D:\\testhub\\node_modules\\@giphy\\js-fetch-api\\dist\\paginator.js.map","includedInParent":true,"mtime":499162500000},{"name":"D:\\testhub\\node_modules\\@giphy\\js-fetch-api\\src\\paginator.ts","includedInParent":true,"mtime":499162500000},{"name":"D:\\testhub\\package.json","includedInParent":true,"mtime":1633782651602},{"name":"D:\\testhub\\node_modules\\@giphy\\js-fetch-api\\package.json","includedInParent":true,"mtime":1633781127523}],"generated":{"js":"\"use strict\";var t=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(n){i(n)}}function u(t){try{c(r.throw(t))}catch(n){i(n)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(a,u)}c((r=r.apply(t,n||[])).next())})},n=this&&this.__generator||function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(u){i=[6,u],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},e=this&&this.__spreadArray||function(t,n){for(var e=0,r=n.length,o=t.length;e<r;e++,o++)t[o]=n[e];return t};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.gifPaginator=void 0;var r=function(r,o){void 0===o&&(o=[]);var i=e([],o),a=o.map(function(t){return t.id}),u=o.length,c=!1;return function(){return t(void 0,void 0,void 0,function(){var t,o,l;return n(this,function(n){switch(n.label){case 0:return c?[2,i]:[4,r(u)];case 1:return t=n.sent(),o=t.pagination,l=t.data,u=o.count+o.offset,c=u===o.total_count,l.forEach(function(t){var n=t.id;a.includes(n)||(i.push(t),a.push(n))}),[2,e([],i)]}})})}};exports.gifPaginator=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":7},"generated":{"line":1,"column":1607}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":13},"generated":{"line":1,"column":1611}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":28},"generated":{"line":1,"column":1613}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":29},"generated":{"line":1,"column":1622}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":81},"generated":{"line":1,"column":1624}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":81},"generated":{"line":1,"column":1632}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":81},"generated":{"line":1,"column":1636}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":81},"generated":{"line":1,"column":1640}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":81},"generated":{"line":1,"column":1642}},{"source":"../src/paginator.ts","name":null,"original":{"line":8,"column":4},"generated":{"line":1,"column":1646}},{"source":"../src/paginator.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":1650}},{"source":"../src/paginator.ts","name":null,"original":{"line":8,"column":14},"generated":{"line":1,"column":1652}},{"source":"../src/paginator.ts","name":null,"original":{"line":8,"column":14},"generated":{"line":1,"column":1654}},{"source":"../src/paginator.ts","name":null,"original":{"line":8,"column":29},"generated":{"line":1,"column":1657}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":1660}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":40},"generated":{"line":1,"column":1662}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":52},"generated":{"line":1,"column":1664}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":56},"generated":{"line":1,"column":1668}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":56},"generated":{"line":1,"column":1677}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":61},"generated":{"line":1,"column":1680}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":61},"generated":{"line":1,"column":1687}},{"source":"../src/paginator.ts","name":null,"original":{"line":10,"column":63},"generated":{"line":1,"column":1689}},{"source":"../src/paginator.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":1694}},{"source":"../src/paginator.ts","name":null,"original":{"line":11,"column":17},"generated":{"line":1,"column":1696}},{"source":"../src/paginator.ts","name":null,"original":{"line":11,"column":29},"generated":{"line":1,"column":1698}},{"source":"../src/paginator.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":1705}},{"source":"../src/paginator.ts","name":null,"original":{"line":12,"column":25},"generated":{"line":1,"column":1708}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":1710}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1717}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1728}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1735}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1742}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1749}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1756}},{"source":"../src/paginator.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":1758}},{"source":"../src/paginator.ts","name":null,"original":{"line":14,"column":8},"generated":{"line":1,"column":1828}},{"source":"../src/paginator.ts","name":null,"original":{"line":14,"column":12},"generated":{"line":1,"column":1835}},{"source":"../src/paginator.ts","name":null,"original":{"line":15,"column":12},"generated":{"line":1,"column":1837}},{"source":"../src/paginator.ts","name":null,"original":{"line":15,"column":12},"generated":{"line":1,"column":1838}},{"source":"../src/paginator.ts","name":null,"original":{"line":15,"column":19},"generated":{"line":1,"column":1840}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":1843}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":1844}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":29},"generated":{"line":1,"column":1846}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":39},"generated":{"line":1,"column":1848}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":1859}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":14},"generated":{"line":1,"column":1866}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":1868}},{"source":"../src/paginator.ts","name":null,"original":{"line":17,"column":23},"generated":{"line":1,"column":1870}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":16},"generated":{"line":1,"column":1877}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":46},"generated":{"line":1,"column":1879}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":52},"generated":{"line":1,"column":1881}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":34},"generated":{"line":1,"column":1892}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":46},"generated":{"line":1,"column":1894}},{"source":"../src/paginator.ts","name":null,"original":{"line":18,"column":52},"generated":{"line":1,"column":1896}},{"source":"../src/paginator.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":1901}},{"source":"../src/paginator.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":1903}},{"source":"../src/paginator.ts","name":null,"original":{"line":19,"column":28},"generated":{"line":1,"column":1905}},{"source":"../src/paginator.ts","name":null,"original":{"line":19,"column":36},"generated":{"line":1,"column":1911}},{"source":"../src/paginator.ts","name":null,"original":{"line":19,"column":47},"generated":{"line":1,"column":1913}},{"source":"../src/paginator.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":1920}},{"source":"../src/paginator.ts","name":null,"original":{"line":20,"column":25},"generated":{"line":1,"column":1922}},{"source":"../src/paginator.ts","name":null,"original":{"line":20,"column":36},"generated":{"line":1,"column":1926}},{"source":"../src/paginator.ts","name":null,"original":{"line":20,"column":47},"generated":{"line":1,"column":1928}},{"source":"../src/paginator.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":1940}},{"source":"../src/paginator.ts","name":null,"original":{"line":21,"column":16},"generated":{"line":1,"column":1942}},{"source":"../src/paginator.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":1950}},{"source":"../src/paginator.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":1959}},{"source":"../src/paginator.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":1962}},{"source":"../src/paginator.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":1966}},{"source":"../src/paginator.ts","name":null,"original":{"line":22,"column":27},"generated":{"line":1,"column":1968}},{"source":"../src/paginator.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":1,"column":1970}},{"source":"../src/paginator.ts","name":null,"original":{"line":23,"column":17},"generated":{"line":1,"column":1973}},{"source":"../src/paginator.ts","name":null,"original":{"line":23,"column":24},"generated":{"line":1,"column":1975}},{"source":"../src/paginator.ts","name":null,"original":{"line":23,"column":33},"generated":{"line":1,"column":1984}},{"source":"../src/paginator.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":1989}},{"source":"../src/paginator.ts","name":null,"original":{"line":25,"column":21},"generated":{"line":1,"column":1991}},{"source":"../src/paginator.ts","name":null,"original":{"line":25,"column":26},"generated":{"line":1,"column":1996}},{"source":"../src/paginator.ts","name":null,"original":{"line":26,"column":16},"generated":{"line":1,"column":1999}},{"source":"../src/paginator.ts","name":null,"original":{"line":26,"column":23},"generated":{"line":1,"column":2001}},{"source":"../src/paginator.ts","name":null,"original":{"line":26,"column":28},"generated":{"line":1,"column":2006}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":2012}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":2013}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":2015}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":2017}},{"source":"../src/paginator.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":2020}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":13},"generated":{"line":1,"column":2031}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":13},"generated":{"line":1,"column":2039}},{"source":"../src/paginator.ts","name":null,"original":{"line":7,"column":25},"generated":{"line":1,"column":2052}}],"sources":{"../src/paginator.ts":"import { IGif } from '@giphy/js-types'\nimport { GifsResult } from './result-types'\n\n/**\n * @hidden\n */\nexport const gifPaginator = (fetchGifs: (offset: number) => Promise<GifsResult>, initialGifs: IGif[] = []) => {\n    const gifs: IGif[] = [...initialGifs]\n    // for deduping\n    const gifIds: (string | number)[] = initialGifs.map(g => g.id)\n    let offset = initialGifs.length\n    let isDoneFetching = false\n    return async () => {\n        if (isDoneFetching) {\n            return gifs\n        }\n        const result = await fetchGifs(offset)\n        const { pagination, data: newGifs } = result\n        offset = pagination.count + pagination.offset\n        isDoneFetching = offset === pagination.total_count\n        newGifs.forEach(gif => {\n            const { id } = gif\n            if (!gifIds.includes(id)) {\n                // add gifs and gifIds\n                gifs.push(gif)\n                gifIds.push(id)\n            }\n        })\n        return [...gifs]\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"396c3fd6a7bde8d2ab30f6396bbee298","cacheData":{"env":{}}}